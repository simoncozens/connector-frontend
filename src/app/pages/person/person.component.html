<ion-header no-border>
  <ion-navbar *ngIf="person">
      <button ion-button menuToggle>
        <ion-icon name="menu"></ion-icon>
      </button>
      <ion-title>{{ isMe ? "Me" : person?.name }}</ion-title>
      <ion-buttons end>
        <button *ngIf="isMe" ion-button (click)="doSomething()">
          <ion-icon name="create"></ion-icon>
        </button>
        <button *ngIf="!isMe && person?.followed" ion-button (click)="unfollow()"><ion-icon name="star"></ion-icon></button>
        <button *ngIf="!isMe && person && !person.followed" ion-button  (click)="follow()"><ion-icon name="star-outline"></ion-icon></button>
      </ion-buttons>
  </ion-navbar>
</ion-header>

<ion-content *ngIf="person">
  <ion-list>
    <p class="spacer"></p>
    <ion-avatar>
      <img class="medavatar" item-center [src]="person?.picture | fromBase64"/>
    </ion-avatar>
    <ion-item>
      <p text-center>Short Bio Goes Here</p>
      <p text-center *ngIf="person.catalyst">
        Catalyst for {{person.catalyst}}
      </p>
    </ion-item>
    <ion-item>
      <ion-grid>
        <ion-row>
          <ion-col>
            <a *ngIf="person?.phone" href="tel:{{person?.phone}}" class="btn-lg"><ion-icon text-center name="call"></ion-icon></a>
          </ion-col>
          <ion-col>
            <a *ngIf="person?.phone" href="mailto:{{person?.phone}}" class="btn-lg"><ion-icon name="text"></ion-icon></a>
          </ion-col>
          <ion-col>
            <a *ngIf="person?.email" href="mailto:{{person?.email}}" class="btn-lg"><ion-icon name="mail"></ion-icon></a>
          </ion-col>
        </ion-row>
        <ion-row>
          <ion-col>
            <a *ngIf="person?.phone" href="tel:{{person?.phone}}" class="btn-lg" text-center>Call</a>
          </ion-col>
          <ion-col>
            <a *ngIf="person?.phone" href="mailto:{{person?.phone}}" class="btn-lg" text-center>Message</a>
          </ion-col>
          <ion-col>
            <a *ngIf="person?.email" href="mailto:{{person?.email}}" class="btn-lg" text-center>Email</a>
          </ion-col>
        </ion-row>
      </ion-grid>
    </ion-item>
    <ion-item>
    <h3>Bio</h3>
      <p text-wrap>{{person?.intro_bio}}</p>
    </ion-item>
    <ion-item>
      <h3>Issue Networks</h3>
        <ion-badge  *ngFor="let e of person?.experience; let last = last">
        {{e}}</ion-badge>
    </ion-item>
    <ion-item>
      <h3>Organisations</h3>
      <p class="organisation" *ngFor="let affiliation of person?.affiliations; let i = index; ">
            <a href="" float-end onclick="window.open(affiliation.website, '_system', 'location=yes')"><ion-icon name="link"></ion-icon></a>

          {{affiliation.position}}<br/>
          {{affiliation.organisation}}
      </p>
    </ion-item>

    <ion-item>
      <h3>Lausanne Events</h3>
      <ion-grid>
        <ion-row>

          <ion-col class="event" *ngFor="let event of person?.events">
              <img src="http://via.placeholder.com/100x100">
              <p>{{event}}</p>
          </ion-col>
        </ion-row>
      </ion-grid>
    </ion-item>

    <ion-item>
      <h3>Languages Spoken</h3>
      <p><i>{{person?.primary_language}}</i>, {{person?.languages_spoken}}</p>
    </ion-item>

    <ion-item>
      <h3>City</h3>
      <p>{{person.city}}</p>
    </ion-item>

    <ion-item>
      <h3>Country of Residence</h3>
      <p>{{person.country}}</p>
    </ion-item>

    <ion-item>
      <h3>{{ 'PeopleRegions' | translate }}</h3>
      <p>
        <span  *ngFor="let r of person?.regions; let last = last">
          <a (click)="peopleSearch({'region':r})">{{r}}</a><span *ngIf="!last">, </span>
        </span>
      </p>
    </ion-item>

      <ion-item>
        <ion-textarea text-left placeholder="My notes" [(ngModel)]='annotation' (change)="saveAnnotation();false"></ion-textarea>
    </ion-item>
  </ion-list>
</ion-content>